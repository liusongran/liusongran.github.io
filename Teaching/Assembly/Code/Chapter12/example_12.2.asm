SSEG	SEGMENT	STACK
		DB	80H  DUP (0)
SSEG	ENDS
DSEG	SEGMENT
ASKFN	DB	'File  Name:$'
FNAME	DB	14,0,14  DUP (?)
ERRMSG	DB	'FILE  ERROR!$'
BUFF	DB	512  DUP (?)
X1		DB 	'abcd'
X2 		DB 	'ad'
DSEG	ENDS
CSEG	SEGMENT
		ASSUME	CS:CSEG, DS:DSEG, SS:SSEG

FILE	PROC	FAR
		PUSH	DS
		XOR		AX,AX
		PUSH	AX
		MOV		AX,DSEG
		MOV		DS,AX
		LEA		DX,ASKFN
		MOV		AH,9
		INT		21H
		LEA		DX,FNAME
		MOV		AH,0AH
		INT		21H
		MOV		DL,0AH
		MOV		AH,2
		INT		21H
		MOV		BL,FNAME+1
		MOV		BH,0
		MOV		[BX+FNAME+2],BH
		LEA		DX,FNAME+2
		MOV		AX,3D00H
		INT		21H
		JC		EXIT
		MOV		BX,AX
AGAIN:	MOV		CX,512
		LEA		DX,BUFF
		MOV		AH,3FH
		INT		21H
		JC		EXIT
		PUSH	AX
		MOV		CX,AX
		MOV		SI,OFFSET  BUFF
PUTC:	MOV		DL,[SI]
		INC		SI
		MOV		AH,2
		INT		21H
		LOOP	PUTC		
		POP		AX
		CMP		AX,512
		JE		AGAIN
		MOV		AH,3EH
		INT		21H
		RET
EXIT:	LEA		DX,ERRMSG
		MOV		AH,9
		INT		21H
		RET
FILE	ENDP
CSEG	ENDS
		END		FILE

